<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" href="../css/newstyle.css" />
    <title>PaciFy : SignUp</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <!-- Google Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- CSS Libraries -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />

    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
      rel="stylesheet"
    />
    <link href="../css/animate.min.css" rel="stylesheet" />
    <link href="../css/flaticon.css" rel="stylesheet" />
    <link href="../css/owl.carousel.min.css" rel="stylesheet" />
    <link href="../css/lightbox.min.css" rel="stylesheet" />

    <!-- Template Stylesheet -->
    <link href="../css/Login.css" rel="stylesheet" />
    <link href="../css/flaticon.css" rel="stylesheet" />

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="../Favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../Favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../Favicon/favicon-16x16.png">
  </head>

  <body>
    <!--Navbar Starts-->
    <div class="navbar navbar-expand-lg bg-dark navbar-dark nav-sticky">
      <div class="container-fluid">
        <div id="logo">
          <a href="../index.html"><img src="../images file/pic.jpg" alt="logo" /></a>
        </div>
        <a href="../index.html" class="navbar-brand"
          >P<span>aci</span>F<span>y</span></a
        >
        <button
          type="button"
          class="navbar-toggler"
          data-toggle="collapse"
          data-target="#navbarCollapse"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div
          class="collapse navbar-collapse justify-content-between"
          id="navbarCollapse"
        >
          <div class="navbar-nav ml-auto">
            <a href="../index.html" class="nav-item nav-link">Home</a>
            <a href="../index.html#about" class="nav-item nav-link">About</a>
            <a href="../index.html#feature" class="nav-item nav-link">Features</a>
            <a href="../index.html#yoga" class="nav-item nav-link"> Yoga Poses</a>
            <a href="../index.html#articles" class="nav-item nav-link">Articles</a>
            <p>

              <img style="width: 50px;border-radius:100px" src="https://i.ibb.co/wzzTS9m/114-1149878-setting-user-avatar-in-specific-size-without-breaking.jpg" id="userAvatar" />
            </p>
            <p id="userName" class="nav-item nav-link"></p>
          </div>
        </div>
      </div>
    </div>
    <!--Navbar Ends-->
    <div class="hero">
      <div class="cont">
        <div class="form sign-in">
          <h2>Sign In</h2>
          <form>
            <label>
              <span>Email Address</span>
              <input id="loginEmail" type="email" name="email" required>
            </label>
            <label>
              <span>Password</span>
              <input id="loginPsd" type="password" name="password"  required>
            </label>
                <label id="password-show">
                      <input type="checkbox" onclick="showPassword()">
                    <span>Show password</span>
                
                </label>
             
            <button id="loginBtn" class="submit" type="submit">Sign In</button>
          </form>
          <p class="forgot-pass">Forgot Password ?</p>

          <div class="social-media">
            <ul>
              <li>
                <a
                  target="_blank"
                  href="https://github.com/Hackathon7/Pacify-final"
                  ><img src="../images file\github.png"
                /></a>
              </li>
            </ul>
          </div>
        </div>

        <div class="sub-cont">
          <div class="img">
            <div class="img-text m-up">
              <h2>First time?</h2>
              <p>Sign up and make sure you take the test!</p>
            </div>
            <div class="img-text m-in">
              <h2>Already joined?</h2>
              <p>
                If you already have an account, just sign in. We've missed you!
              </p>
            </div>
            <div class="img-btn">
              <span class="m-up">Sign Up</span>
              <span class="m-in">Sign In</span>
            </div>
          </div>
          <div class="form sign-up">
            <form>
                        <h2>Sign Up</h2>
                        <label>
                          <span>Name</span>
                              <input type="text" required>
                        </label>
                    
                        <label>
                          <span>Email</span>
                          <input id="Signemail" type="email" required>
                        </label>
                        <label>
                          <span>Password</span>
                            <input id="SignPsd" type="password" class ="pwd" required>
                        <label>
                         

                        <button id="signBtn" type="submit" class="submit">Sign Up Now</button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript" src="../scripts/script.js"></script>
    <script>
      function showPassword() {
          var x = document.getElementById("password");
          if (x.type === "password") {
            x.type = "text";
          } else {
            x.type = "password";
          }
        }
    </script>
  </body>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.1/firebase-app.js";
    import {getAuth, createUserWithEmailAndPassword,signInWithEmailAndPassword, onAuthStateChanged} from "https://www.gstatic.com/firebasejs/9.8.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyD6aIUCVobRIiW93f9R-qWuOmDNcem8CRg",
      authDomain: "pacify-d7d5b.firebaseapp.com",
      projectId: "pacify-d7d5b",
      storageBucket: "pacify-d7d5b.appspot.com",
      messagingSenderId: "1009426380494",
      appId: "1:1009426380494:web:3438da6950e11f0771829f"
    };
  
    const app = initializeApp(firebaseConfig);

    document.getElementById('signBtn').addEventListener('click',(e) => {
      e.preventDefault();
      const auth = getAuth();
      const email = document.getElementById('Signemail').value;
      const password = document.getElementById('SignPsd').value;

      createUserWithEmailAndPassword(auth, email, password)
      .then((userCredential) => {
        const user = userCredential.user;
        alert('Sucess')
      })
      .catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message;
        alert(errorMessage)
      });
    })

    document.getElementById('loginBtn').addEventListener('click',(e) => {
      e.preventDefault();
      const auth = getAuth();
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPsd').value
      signInWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
          const user = userCredential.user;
          alert(user.email+" has Logged In Successfully")
        })
        .catch((error) => {
          const errorCode = error.code;
          const errorMessage = error.message;
          alert(errorMessage)
        });

    })


    const auth = getAuth();
    const user = auth.currentUser;
    var name = " ";
    
    onAuthStateChanged(auth, (user) => {
      if(user){
        const uid = user.uid;
        console.log(user)
        name = user.email;
       
        console.log(name)
        localStorage.setItem("email", name)
        if(user.displayName == null || user.photoURL == null){
          document.getElementById('userName').innerHTML = user.email;
          document.getElementById('userAvatar').src = 'https://i.ibb.co/wzzTS9m/114-1149878-setting-user-avatar-in-specific-size-without-breaking.jpg'
         
        }else{
          document.getElementById('userAvatar').src = user.photoURL;
          document.getElementById('userName').innerHTML = user.displayName;
        }
        
      }
    })
   
   
  </script>
</html>
